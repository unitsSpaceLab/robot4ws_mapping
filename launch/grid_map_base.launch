<!-- 
  @author Davide Panarella
  @email davidepanarella.ts@gmail.com
 -->

<launch>

  <arg name="/use_sim_time" default="true"/>
  <arg name="gridmap_config_file" default="archimede_gridmap.yaml"/>
  <arg name="costmap_config_file" default="costmap_2d_archimede.yaml"/>

  <rosparam command="load" file="$(find robot4ws_mapping)/config/$(arg gridmap_config_file)" ns="gridmap"/>

  <!-- Publish joint transforms -->
  <param name="robot_description_xacro" command="$(find xacro)/xacro $(find robot4ws_description)/urdf/rover.urdf.xacro"/>
  <!-- <param name="robot_description" textfile="$(find robot4ws_description)/urdf/rover.urdf"/> -->

  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen"/>

  <node name="p2g_listener" pkg="robot4ws_mapping" type="gridmap_node" output="screen"/>

  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find robot4ws_mapping)/rviz/grid_map.rviz" />

  <node name="costmap_2d_node" pkg="costmap_2d" type="costmap_2d_node" output="screen">
    <rosparam command="load" file="$(find robot4ws_mapping)/config/$(arg costmap_config_file)" ns="costmap"/>
  </node>


<!--
  <node name="static_tf0" pkg="tf" type="static_transform_publisher" args="0 0 0 0 0 0 /map /grid_map 100"/>
  <node name="static_tf1" pkg="tf" type="static_transform_publisher" args="0 0 0 0 0 0 /base_link /velodyne 100"/>
-->

</launch>

